---
name: ucal
description: "跨平台内容分析和话题调研。给链接时自动分析内容，说'调研XX'时搜索多篇综合分析。支持小红书、知乎、X、通用网页。当用户给出 xhs/zhihu/x.com 链接、说'帮我看看'、'分析一下'、'调研XX'、'大家怎么看'时使用。"
---

# ucal 内容分析

利用 ucal MCP 工具获取跨平台内容，按平台特征差异化分析。

**核心思路**: ucal MCP 解决「怎么取数据」，本 skill 解决「取到后怎么分析」。

## 平台识别

从 URL 或用户意图自动识别平台：

| URL 特征 | 平台 | MCP platform 参数 |
|----------|------|-------------------|
| `xiaohongshu.com`, `xhslink.com` | XHS | `xhs` |
| `zhihu.com` | 知乎 | `zhihu` |
| `x.com`, `twitter.com` | X | `x` |
| 其他 URL | 通用 | `generic` |

不确定时问用户。

## 两个模式

| 模式 | 触发 | 流程 |
|------|------|------|
| **read** | 给链接、"帮我看看这篇"、"分析一下" | 识别平台 → `ucal_platform_read` → 按平台策略分析 → 输出 |
| **research** | "调研XX"、"大家怎么看"、"搜一下XX" | 问题锐化 → 多维搜索 → 选帖确认 → pre-read hypothesis → 深读 → 证据追踪+反思 → [可选追搜] → 叙事报告 |

---

## 平台数据特征

分析策略因平台而异，因为各平台内容结构不同：

| 平台 | 正文特点 | 评论数据 | 互动指标 | 价值中心 |
|------|---------|---------|---------|---------|
| **XHS** | 短文（几句话+图） | 完整线程（父评论+子评论） | 赞/评/藏 | **评论区讨论** |
| **知乎** | 长文答案/文章 | read 不提取评论 | 仅赞同数 | **正文论证** |
| **X** | 单条推文 | read 不提取回复 | 赞/转/回 | 正文+传播指标 |
| **Generic** | 任意网页文本 | 不提取 | 无 | 正文 |

---

## Read 模式

### 流程

1. 从 URL 识别平台
2. `ucal_platform_read(platform, url)` 获取内容
3. 按下方平台策略分析
4. 输出结构化分析

### XHS 策略：以评论为核心

XHS 帖子本身短，真正的信息在评论区。分析重心放在评论。

**评论处理规则**:
- 合并相似评论（如 10 人都说"对啊"→ 归为一个观点，标注"N人认同"）
- 过滤纯表情、"+1"、无实质内容的评论
- 过滤与话题无关的闲聊
- 保留带独特论据或个人经验的评论

**输出格式**:

```markdown
## [标题]
**作者**: XX | **来源**: [链接](url) | 赞 XX · 藏 XX · 评 XX

### 帖子概述
[1-2 句概括正文]

### 评论区观点图谱
#### 主流声音（N 人提到）
- [观点 A]: [代表性评论摘要] — @用户1, @用户2 等
- [观点 B]: ...

#### 争议焦点
- [分歧点]: 正方说... vs 反方说...

#### 独特视角
- @用户X: [与主流不同的有价值观点]

#### 被忽略的问题
- [评论者提出但没人回应的有意义问题]
```

### 知乎策略：以正文论证为核心

知乎答案是长文，价值在论证结构和专业深度。无评论数据。

**输出格式**:

```markdown
## [标题]
**作者**: XX | **来源**: [链接](url) | 赞同 XX

### 核心论点
- [作者的主要结论/主张]

### 论证结构
1. [论据 1]: [支撑证据/数据/案例]
2. [论据 2]: ...

### 关键信息
- [文中引用的数据、来源、专业概念]

### 局限性
- [论证中的薄弱点或未覆盖的角度]
```

### X 策略：简洁 + 传播分析

推文短小，重点在观点提炼和传播度。

**输出格式**:

```markdown
## @username 的推文
**来源**: [链接](url) | 赞 XX · 转 XX · 回 XX

### 核心观点
- [观点提炼]

### 传播分析
- [基于转赞比分析共鸣度]

### 背景补充
- [基于自身知识补充的上下文]
```

### Generic 策略：纯内容提炼

**输出格式**:

```markdown
## [标题]
**来源**: [链接](url)

### 内容摘要
- [3-5 个要点]

### 核心观点
- [关键主张]
```

---

## Research 模式

两阶段固定结构。SUFFICIENT 是默认决策。总阅读量上限 6 篇。

```
Phase 1（必做）：Step 0 → Step 5
Phase 2（可选，高门槛触发）：追搜 ≤2 篇 → 直接综合
```

### Phase 1

#### Step 0: 问题锐化

用户说"调研 XX"时，不直接用原始词搜索。先做两件事：

**a. 问题拆解**：把原始关键词拆成 2-3 个子问题，选 1 个最锐利的生成语义变体搜索词。

```
原始："调研火锅蘸料"
拆解：
  - "选蘸料的人在做什么决定？"→ 变体：火锅蘸料 选择
  - "蘸料偏好跟什么身份挂钩？"→ 变体：南方人 北方人 火锅
  - "蘸料这件事什么情绪最强？"→ 变体：火锅蘸料 争议
选择最相关的 1 个变体词。
```

**b. 搜索维度参考**（选 1 个最相关的维度生成变体词）：

| 维度 | 目标 | 构造方式 | 例子 |
|------|------|---------|------|
| 议题 | 观点和争议 | 原始关键词 | "火锅蘸料" |
| 情感 | 情感投射和共鸣 | 关键词 + 情绪词 | "火锅 想家" |
| 场景 | 行为模式 | 关键词 + 具体场景 | "第一次请对象吃火锅" |
| 身份 | 身份认同 | 关键词 + 身份标签 | "北方人 在南方 火锅" |

**硬约束**：搜索次数 = 原始词 + 1 个变体词，共 2 次搜索。

#### Step 1: 搜索

确定平台（从用户意图推断，不确定就问）。

对每个搜索词调用 `ucal_platform_search(platform, query, limit=10)`。
两次搜索结果合并去重（按 URL 去重）。

#### Step 2: 选帖

从合并结果中选 3-4 篇，遵循选帖标准：

1. **互动量梯度**：至少 1 篇高互动 + 1 篇低互动
2. **立场分布**：如可判断，至少 1 篇与主流不同
3. **作者多样性**：避免同一作者多篇

展示给用户，每篇标注入选理由。用户直接回复"继续"或其他内容视为默认同意。

#### Step 3: Pre-read hypothesis

在调用 `ucal_platform_read` **之前**写出：

> **Pre-read hypothesis**: Based on the search results, I expect to find [具体预期]. The main perspectives are likely [X] and [Y]. I'm uncertain about [Z].

#### Step 4: 深读

按平台策略读取：

| 平台类型 | 策略 | 参数 |
|---------|------|------|
| API（X/Twitter） | 并行读取（超过 5 篇时分批） | 默认参数 |
| 浏览器（XHS/知乎） | 串行读取 | `comment_limit=10`, `expand_replies=1` |

每篇读完立即输出 interim summary（3-5 行）：
- 核心观点
- 与其他帖子的异同
- 该帖/评论区中最具情感冲击力的 1 条原文引用（XHS 必需；知乎/X 如有则写，无则省略）

读取过程中输出进度："正在读取第 2/4 篇..."

读取过程中收集：
- 各帖 `extra.tags` → 合并去重
- 各帖 `extra.hot_threads` → 记录热门讨论线索

#### Step 5: 证据追踪 + 反思决策

```
**证据追踪表**

| 发现/判断 | 引用证据 + 来源 | 信心 |
|-----------|---------------|------|
| [判断内容] | "[原文]" — @用户X（帖A） | 强/弱/矛盾 |

**反思决策**
- Pre-read hypothesis 中被证实的：[列出]
- Pre-read hypothesis 中被推翻的：[列出，附具体证据]
- 意外发现（hypothesis 中没有预料到的）：[列出，附具体证据]
- 决策：SUFFICIENT / PURSUE "[具体搜索词]" because [一句话理由]
- 已读帖子 URL 列表（计数：N 篇）

规则：
- 如果"被推翻的"和"意外发现"均为空 → 决策必须是 SUFFICIENT
- 如果"意外发现"为空，需额外一句话解释为什么所有发现都在预期内
- SUFFICIENT 是默认值。只有能说出具体缺口和具体搜索词时才选 PURSUE
- 如果已读 ≥5 篇 → 决策必须是 SUFFICIENT
```

**反思信号**（辅助判断）：

| # | 信号（是/否） | 行动 |
|---|-------------|------|
| 1 | 所有帖子观点方向一致？ | PURSUE：搜反面关键词 |
| 2 | 出现 ≥2 个未预期的专有术语/标签？ | PURSUE：用新术语搜 |
| 3 | 多数观点无具体经验/故事支撑？ | PURSUE：搜"经验分享""测评"类帖子 |
| 4 | 以上均"否"？ | SUFFICIENT |

### Phase 2（可选）

仅当 Phase 1 反思决策为 PURSUE 时触发。

1. 用 PURSUE 指定的搜索词追搜
2. 读取 ≤2 篇新帖（总阅读量 ≤6 篇）
3. 更新证据追踪表
4. 直接进入综合输出，**不再做第二轮反思**

### 综合输出

#### 通用叙事框架（跨平台共用）

```markdown
# [话题] 调研报告
> [平台] | N 篇内容（基于有限样本） | YYYY-MM-DD

## 一句话结论
[最核心的发现，带态度]

## 我发现了什么
[叙事体。按洞察惊喜度排列，不按帖子顺序。]

每个发现用以下结构：
> [直接发现] / [推断]：[判断内容]（N/M 篇帖子，K 条评论提及）
> 证据："[引用原文/评论]" —— @用户X（帖A）
> 反例信号：如果发现 [具体反例]，则此结论需修正为 [修正方向]

如果没有意外发现，直接写"这个话题的社区讨论相当一致，无出乎意料的观点"。

## 扎心原文
[从所有评论中摘出 3-5 条最有情感冲击力的原始评论，
包括让人鼻酸的、让人爆笑的、让人想吵架的。
标注出处和互动量。]
（XHS 必需；知乎/X 如有则写，无则省略此节）

## 社区真正在争什么
[挖掘争议背后的深层原因。
不是"正方 vs 反方"，而是"分裂的断层线是什么"。]
（有争议时写，无争议则省略此节）

## 如果继续挖
[2-3 个方向 + 理由]

## 反思过程
[Pre-read hypothesis → 搜了什么 → 读了什么 → 证据追踪表 → 追搜了什么/为什么没追搜]

## 数据来源
| 标题 | 作者 | 链接 | 互动量 | 入选理由 |
```

#### 平台差异化

在"我发现了什么"节内嵌不同子结构：

| 平台 | 子结构 |
|------|--------|
| XHS | 按"讨论线程"组织：追踪评论区对话链的完整脉络（父评论→子评论的观点转折） |
| 知乎 | 按"论证比较"组织：答主A vs 答主B 的论据类型和说服力对比 |
| X | 按"观点+传播"组织：原始观点 + 转赞比异常分析 |

### 结构性诚实约束

| 约束 | 格式要求 |
|------|---------|
| 不夸大样本量 | 每个判断后标注 `（N/M 篇帖子，K 条评论提及）` |
| 标注不确定 | 区分 `[直接发现]`（原文明确表达）和 `[推断]`（交叉分析结论） |
| 证据优先 | 判断 + 引用交替结构，无引用的判断不允许出现 |
| 不填空节 | 可选节标注省略条件，无内容则省略 |

---

## 错误处理

| 场景 | 处理 |
|------|------|
| 浏览器平台（xhs/zhihu）会话过期 | 提示用户扫码登录 → `ucal_platform_login(platform)` → 重试 |
| 搜索结果为空 | 建议用户换关键词 |
| 单篇读取失败 | 跳过该篇，在输出中标注 "[不可访问]" |
| Research 成功读取 < 2 篇 | 降级为单篇摘要模式 |
